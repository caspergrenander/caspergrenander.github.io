<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Historien Bakom Musiken – Data Deletion Request</title>
  <style>
    /* (CSS styles for layout, colors, etc., identical to the source design) */
    body {
      background: #1A2838;
      color: #F5E5C8;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    header {
      background: #2A4A4A;
      padding: 20px;
      text-align: center;
    }
    header h1 {
      margin: 0;
      font-size: 24px;
    }
    header .subtitle {
      margin: 5px 0 0;
      font-size: 16px;
      color: #E8B65C;
    }
    .container {
      max-width: 800px;
      margin: 40px auto;
      padding: 0 20px;
    }
    h2 {
      color: #E8B65C;
    }
    .section-divider {
      height: 1px;
      background: #E8B65C;
      margin: 30px 0;
      border: none;
    }
    .info-box {
      background: rgba(42, 74, 74, 0.1);
      padding: 15px 20px;
      border-left: 4px solid #E8B65C;
      margin-bottom: 30px;
    }
    label {
      display: block;
      margin: 15px 0 5px;
      font-weight: bold;
    }
    input[type="text"],
    input[type="email"],
    select,
    textarea {
      width: 100%;
      padding: 10px;
      font-size: 16px;
      font-family: inherit;
      background: #FFFFFF;
      border: 2px solid #2A4A4A;
      border-radius: 4px;
      box-sizing: border-box;
    }
    input[type="text"]::placeholder,
    input[type="email"]::placeholder,
    textarea::placeholder {
      color: #7A8C9C;
    }
    select {
      cursor: pointer;
    }
    textarea {
      height: 100px;
      resize: vertical;
    }
    .checkbox-group {
      margin: 20px 0;
    }
    .checkbox-group label {
      display: block;
      font-weight: normal;
      margin-bottom: 10px;
    }
    .checkbox-group input {
      margin-right: 8px;
      transform: scale(1.2);
    }
    .button-container {
      margin-top: 20px;
      text-align: center;
    }
    .button {
      background: #E8B65C;
      color: #1A2838;
      border: none;
      padding: 12px 20px;
      font-size: 16px;
      font-weight: bold;
      border-radius: 4px;
      cursor: pointer;
      opacity: 0.6;  /* initially disabled */
    }
    .button:disabled {
      cursor: not-allowed;
    }
    .note {
      font-size: 14px;
      color: #7A8C9C;
      margin-top: 10px;
    }
    .follow-section {
      text-align: center;
      margin: 50px 0 30px;
    }
    .follow-section h2 {
      margin-bottom: 30px;
    }
    .social-icons {
      display: flex;
      justify-content: center;
      gap: 40px;
      flex-wrap: wrap;
    }
    .social-icon {
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: transform 0.3s ease;
    }
    .social-icon:hover {
      transform: translateY(-5px);
    }
    .icon-container {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      background: #2A4A4A;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 10px;
      transition: background-color 0.3s ease;
    }
    .social-icon:hover .icon-container {
      background: #D88B5C;
    }
    .icon-container img, .icon-container svg {
      width: 35px;
      height: 35px;
      /* Assuming SVG icons are used, fill color is inherited */
    }
    .social-icon span {
      color: #F5E5C8;
      font-size: 14px;
      font-weight: 500;
      margin-top: 5px;
    }
    footer {
      background: #2A4A4A;
      padding: 20px;
      text-align: center;
    }
    .footer-title {
      font-size: 16px;
      color: #F5E5C8;
      margin: 0;
    }
    .footer-links {
      margin-top: 10px;
    }
    .footer-links a {
      color: #E8B65C;
      text-decoration: none;
      margin: 0 10px;
      font-size: 14px;
    }
    .footer-links a:hover {
      text-decoration: underline;
    }
    @media (max-width: 768px) {
      .social-icons { gap: 30px; }
      .icon-container { width: 60px; height: 60px; }
      .icon-container svg { width: 30px; height: 30px; }
    }
    @media (max-width: 480px) {
      .social-icons { gap: 20px; }
      .icon-container { width: 50px; height: 50px; }
      .icon-container svg { width: 25px; height: 25px; }
      .footer-links {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
    }
  </style>
</head>
<body>

<header>
  <a href="https://caspergrenander.github.io/historienbakomusiken/projekt-info/">
    <img src="/historienbakomusiken/assets/logo.png" alt="Historien Bakom Musiken Logo" />
    <h1>Historien Bakom Musiken</h1>
  </a>
  <p class="subtitle">Data Deletion Request – AutoPublisher</p>
</header>

<div class="container">
  <h2>About Data Deletion</h2>
  <p>
    You have the right to request deletion of data processed in connection with 
    <strong>Historien Bakom Musiken – AutoPublisher</strong>.
  </p>
  <p>
    This request applies only to data processed by AutoPublisher. 
    Data managed directly by TikTok must be handled through TikTok's own account settings.
  </p>

  <div class="section-divider"></div>

  <div class="info-box">
    <strong>Processing time:</strong> The process is usually completed within 
    <strong>7–10 business days</strong> after the request is received.
  </div>

  <div class="section-divider"></div>

  <h2>Request Data Deletion</h2>

  <!-- Hidden iframe to capture Google Form response without navigation -->
  <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>

  <form id="dataDeletionForm" method="POST"
        action="https://docs.google.com/forms/d/e/1FAIpQLSfIlZrBcx1CgAu-cHCGzr-Mw7gxqPpB3mMwnNDnr-eOG10jLQ/formResponse"
        target="hidden_iframe" autocomplete="on">
    <!-- Google Forms required hidden fields: -->
    <input type="hidden" name="fvv" value="1" />
    <input type="hidden" name="draftResponse" value="[]" />
    <input type="hidden" name="pageHistory" value="0" />
    <!-- Hidden Reference ID and source fields: -->
    <input type="hidden" id="requestId" name="entry.1526351014" value="" />
    <input type="hidden" id="submissionSource" name="entry.1745207114" value="Public Website – Data Deletion Page" />
    <input type="hidden" name="fbzx" value="" />

    <label>Full name</label>
    <input type="text" name="entry.1000001577" placeholder="Your full name" required />

    <label>Email address</label>
    <input type="email" name="entry.1233888397" placeholder="you@example.com" required />

    <label>TikTok username</label>
    <input type="text" name="entry.531571766" placeholder="@yourusername" required />

    <label>Type of request</label>
    <select id="requestType" name="entry.1847505465" required>
      <option value="Delete all data related to my account">Delete all data related to my account</option>
      <option value="Delete uploaded video metadata">Delete uploaded video metadata</option>
      <option value="Revoke access &amp; delete authentication tokens">Revoke access &amp; delete authentication tokens</option>
    </select>

    <label>Additional information (optional)</label>
    <textarea name="entry.226762827" placeholder="Optional comments or clarification"></textarea>

    <div class="checkbox-group">
      <label>
        <input type="checkbox" id="confirmOwner" name="entry.977425461" 
               value="I confirm that I am the owner of the TikTok account listed above" required />
        I confirm that I am the owner of the TikTok account listed above.
      </label>
      <label>
        <input type="checkbox" id="confirmUndo" name="entry.246601893" 
               value="I understand that this request cannot be undone" required />
        I understand that this request cannot be undone.
      </label>
    </div>

    <div class="button-container">
      <button class="button" id="submitBtn" type="submit" disabled>Request Data Deletion</button>
      <div class="note" id="submitNote">
        Submissions are sent via Google Forms. If you don't see a confirmation, please verify the form action URL and entry IDs.
      </div>
    </div>
  </form>

  <!-- Success message (shown briefly after submission) -->
  <div id="successMessage" class="note" style="display:none; font-size:14px; margin-top:18px;">
    ✅ Request submitted. Thank you.
  </div>

  <div class="follow-section">
    <h2>Follow Us</h2>
    <div class="social-icons">
      <!-- Example social icon (Instagram) -->
      <div class="social-icon">
        <a href="https://www.instagram.com/historienbakommusiken" target="_blank" rel="noopener noreferrer">
          <div class="icon-container">
            <!-- SVG icon for Instagram -->
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" fill="#FFFFFF">
              <!-- ... (Instagram SVG path) ... -->
            </svg>
          </div>
          <span>Instagram</span>
        </a>
      </div>
      <!-- (Other social icons like Facebook, Spotify, TikTok can be added similarly) -->
    </div>
  </div>
</div>

<footer>
  <div class="footer-content">
    <p class="footer-title">Historien Bakom Musiken – AutoPublisher</p>
    <p class="footer-copyright">© 2026 Casper Grenander. All rights reserved.</p>
    <div class="footer-links">
      <a href="https://caspergrenander.github.io/historienbakomusiken/projekt-info/">Home</a>
      <a href="https://caspergrenander.github.io/historienbakomusiken/terms-of-service">Terms of Service</a>
      <a href="https://caspergrenander.github.io/historienbakomusiken/privacy-policy">Privacy Policy</a>
      <a href="https://caspergrenander.github.io/historienbakomusiken/data%20deletion">Data Deletion</a>
      <a href="mailto:app.auto.publisher@gmail.com">Contact</a>
    </div>
  </div>
</footer>

<script>
document.addEventListener('DOMContentLoaded', function () {
  // Generate and set a unique Reference ID in the hidden field
  const requestIdField = document.getElementById('requestId');
  if (requestIdField && !requestIdField.value) {
    const year = new Date().getFullYear();
    const part1 = Math.floor(1000 + Math.random() * 9000);
    const part2 = Math.floor(1000 + Math.random() * 9000);
    const referenceId = 'DR-' + year + '-' + part1 + '-' + part2;
    requestIdField.value = referenceId;
    try {
      localStorage.setItem('lastReferenceId', referenceId);
    } catch (e) {
      console.warn('Unable to access localStorage');
    }
  }

  // Enable submit button only if both checkboxes are checked
  const confirmOwner = document.getElementById('confirmOwner');
  const confirmUndo = document.getElementById('confirmUndo');
  const submitBtn = document.getElementById('submitBtn');
  if (confirmOwner && confirmUndo && submitBtn) {
    const updateButtonState = () => {
      const bothChecked = confirmOwner.checked && confirmUndo.checked;
      submitBtn.disabled = !bothChecked;
      submitBtn.style.opacity = bothChecked ? '1' : '0.6';
    };
    confirmOwner.addEventListener('change', updateButtonState);
    confirmUndo.addEventListener('change', updateButtonState);
    updateButtonState();
  }

  // Handle form submission: show success message and redirect
  const form = document.getElementById('dataDeletionForm');
  const successMessage = document.getElementById('successMessage');
  if (form) {
    form.addEventListener('submit', function () {
      if (submitBtn) {
        submitBtn.disabled = true;
        submitBtn.style.opacity = '0.6';
      }
      if (successMessage) {
        successMessage.style.display = 'block';
      }
      // Redirect to confirmation page after a short delay
      setTimeout(() => {
        window.location.href = "https://caspergrenander.github.io/historienbakomusiken/request-received";
      }, 900);
    });
  }
});
</script>
</body>
</html>