<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AutoPublisher – Upload Interface</title>

<style>
/* BASE */
body {
  margin: 0;
  padding: 0;
  background: #1A2838;
  color: #F5E5C8;
  font-family: Arial, Helvetica, sans-serif;
  line-height: 1.7;
}

/* ACCENT BARS (mail-style) */
.accent-bar {
  height: 3px;
  background: #E8B65C;
}

/* HEADER */
header {
  padding: 60px 20px 40px;
  text-align: center;
  background: #0D0F15;
  border-bottom: 1px solid #2A4A4A;
}

header a {
  color: inherit;
  text-decoration: none;
  display: inline-block;
}

header img {
  width: 180px;
  border-radius: 4px;
  margin-bottom: 18px;
}

h1 {
  color: #FFFFFF;
  margin-bottom: 8px;
  font-weight: 600;
  text-transform: uppercase;
}

p {
  max-width: 800px;
  margin: 10px auto;
  padding: 0 20px;
  color: #F5E5C8;
  font-size: 15px;
}

/* LINKS */
a {
  color: #E8B65C;
  text-decoration: none;
}
a:hover {
  text-decoration: underline;
}

/* CONTAINER */
.container {
  max-width: 900px;
  margin: 40px auto;
  background: #0D0F15;
  padding: 40px 30px;
  border-radius: 6px;
  border: 1px solid #2A4A4A;
}

/* UI BOX */
.ui-box {
  margin-top: 30px;
  text-align: center;
}

/* BUTTONS */
.button {
  background: #E8B65C;
  color: #1A2838;
  border: none;
  padding: 12px 22px;
  border-radius: 4px;
  font-weight: 600;
  cursor: pointer;
  margin: 8px;
}

.button.secondary {
  background: transparent;
  color: #E8B65C;
  border: 1px solid #2A4A4A;
}

.button:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

/* INPUTS */
textarea {
  width: 90%;
  max-width: 700px;
  background: #1A2838;
  color: #F5E5C8;
  border: 1px solid #2A4A4A;
  border-radius: 4px;
  padding: 10px;
  margin: 10px auto;
  display: block;
  resize: vertical;
}

/* STATUS */
#status {
  margin-top: 20px;
  font-size: 14px;
  color: #E8B65C;
}

/* SEPARATOR */
hr {
  border: none;
  border-top: 1px solid #2A4A4A;
  margin: 30px 0;
}

/* NOTE */
.note {
  margin-top: 20px;
  font-size: 13px;
  color: #2A4A4A;
}

/* FOOTER */
footer {
  margin-top: 60px;
  padding: 30px;
  text-align: center;
  font-size: 12px;
  color: #2A4A4A;
  border-top: 1px solid #2A4A4A;
}
</style>
</head>

<body>

<div class="accent-bar"></div>

<header>
  <a href="/historienbakomusiken/">
    <img src="/historienbakomusiken/historienbakomusiken/assets/logo.png" alt="Historien Bakom Musiken">
    <h1>AutoPublisher</h1>
  </a>
  <p>Upload & Publish Interface</p>
</header>

<div class="container">

  <p>
    Users manually upload and publish videos to
    <strong>their own TikTok account</strong>.
    No actions are automated.
  </p>

  <hr>

  <div class="ui-box">

    <input type="file" id="videoFile" accept="video/*" style="display:none">

    <button class="button" id="uploadBtn">Upload Video</button>

    <textarea id="caption" placeholder="Write caption..."></textarea>
    <textarea id="hashtags" placeholder="#music #history"></textarea>

    <button class="button secondary" id="generateBtn">
      Generate caption & hashtags
    </button>

    <hr>

    <button class="button" id="publishBtn" disabled>Publish now</button>
    <button class="button secondary" id="scheduleBtn" disabled>Schedule</button>

    <div id="status"></div>

    <div class="note">
      User-initiated publishing. No automated actions.
    </div>

  </div>
</div>

<footer>
  © 2025 Casper Grenander – Historien Bakom Musiken AutoPublisher
</footer>

<div class="accent-bar"></div>

<script>
let selectedFile = null;

const uploadBtn = document.getElementById("uploadBtn");
const publishBtn = document.getElementById("publishBtn");
const scheduleBtn = document.getElementById("scheduleBtn");
const generateBtn = document.getElementById("generateBtn");

uploadBtn.onclick = () => {
  document.getElementById("videoFile").click();
};

document.getElementById("videoFile").onchange = e => {
  selectedFile = e.target.files[0];
  if (selectedFile) {
    document.getElementById("status").innerText =
      "Video selected: " + selectedFile.name + " – Ready to post";
    publishBtn.disabled = false;
    scheduleBtn.disabled = false;
  }
};

generateBtn.onclick = () => {
  document.getElementById("status").innerText =
    "Generating caption & hashtags...";

  google.script.run
    .withSuccessHandler(res => {
      document.getElementById("caption").value = res.caption || "";
      document.getElementById("hashtags").value = res.hashtags || "";
      document.getElementById("status").innerText =
        "Suggestions generated. Ready to post.";
    })
    .withFailureHandler(err => {
      document.getElementById("status").innerText =
        "Error: " + err.message;
    })
    .generateCaptionAndHashtags();
};
</script>

</body>
</html>