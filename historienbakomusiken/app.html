<!DOCTYPE html>  <html lang="sv">  
<head>  
<meta charset="UTF-8">  
<meta name="viewport" content="width=device-width, initial-scale=1.0">  
<title>AutoPublisher – Upload Interface</title>  <style>  
body {  
  margin: 0;  
  padding: 0;  
  background: #000;  
  color: #FFFFFF;  
  font-family: "Segoe UI", Roboto, Arial, sans-serif;  
  line-height: 1.6;  
}  
  
header {  
  padding: 60px 20px 40px;  
  text-align: center;  
  background: #111;  
  border-bottom: 1px solid #F5B04133;  
  box-shadow: 0 0 15px rgba(245,176,65,0.15);  
}  
  
header a {  
  color: inherit;  
  text-decoration: none;  
  display: inline-block;  
}  
  
header img {  
  width: 180px;  
  border-radius: 6px;  
  margin-bottom: 20px;  
  box-shadow: 0 0 15px rgba(0,0,0,0.5);  
}  
  
h1 {  
  color: #F5B041;  
  text-transform: uppercase;  
  font-weight: 700;  
  margin-bottom: 10px;  
}  
  
p {  
  max-width: 900px;  
  margin: 10px auto;  
  padding: 0 20px;  
  color: #E0E0E0;  
}  
  
.container {  
  max-width: 900px;  
  margin: 50px auto;  
  background: #111;  
  padding: 40px 30px;  
  border-radius: 10px;  
  border: 1px solid #F5B04122;  
  box-shadow: 0 0 15px rgba(245,176,65,0.1);  
  text-align: center;  
}  
  
.ui-box {  
  margin-top: 30px;  
  padding: 25px;  
  border: 1px dashed #333;  
  border-radius: 8px;  
}  
  
.button {  
  display: inline-block;  
  margin: 12px;  
  padding: 16px 28px;  
  font-size: 16px;  
  font-weight: 600;  
  border-radius: 8px;  
  border: none;  
  cursor: pointer;  
  background: #F5B041;  
  color: #000;  
}  
  
.button:disabled {  
  background: #333;  
  color: #999;  
  cursor: not-allowed;  
}  
  
.note {  
  margin-top: 20px;  
  font-size: 14px;  
  color: #B4B4B4;  
}  
  
#status {  
  margin-top: 20px;  
  font-size: 14px;  
  color: #9FE870;  
}  
  
footer {  
  margin-top: 60px;  
  padding: 30px;  
  text-align: center;  
  font-size: 0.9rem;  
  color: #B4B4B4;  
  border-top: 1px solid #333;  
}  
</style>  </head>  <body>  <header>  
  <a href="/historienbakomusiken/">  
    <img src="/historienbakomusiken/historienbakomusiken/assets/logo.png"  
         alt="Historien Bakom Musiken Logo">  
    <h1>AutoPublisher</h1>  
  </a>  
  <p>Upload & Publish Interface</p>  
</header>  <div class="container">    <p>  
    This interface is shown after a user logs in with TikTok using the official OAuth flow.  
  </p>    <p>  
    Users manually upload and publish videos to <strong>their own TikTok account</strong>.  
    No actions are automated.  
  </p>    <div class="ui-box">  <input type="file" id="videoFile" accept="video/*" style="display:none">  

<button class="button" id="uploadBtn">Upload Video</button>  
<button class="button" id="publishBtn" disabled>Publish</button>  

<div id="status"></div>  

<div class="note">  
  User-initiated upload & publish via Apps Script backend.  
</div>

  </div>  </div>  <footer>  
  © 2025 Casper Grenander – Historien Bakom Musiken AutoPublisher  
</footer>  <script>  
let selectedFile = null;  
  
document.getElementById("uploadBtn").onclick = () => {  
  document.getElementById("videoFile").click();  
};  
  
document.getElementById("videoFile").onchange = (e) => {  
  selectedFile = e.target.files[0];  
  if (selectedFile) {  
    document.getElementById("status").innerText =  
      "Video selected: " + selectedFile.name;  
    document.getElementById("publishBtn").disabled = false;  
  }  
};  
  
document.getElementById("publishBtn").onclick = () => {  
  if (!selectedFile) return;  
  
  document.getElementById("status").innerText =  
    "Sending video to backend...";  
  
  const reader = new FileReader();  
  reader.onload = () => {  
    const base64Data = reader.result.split(",")[1];  
  
    google.script.run  
      .withSuccessHandler(() => {  
        document.getElementById("status").innerText =  
          "Video received by backend. Ready for TikTok upload.";  
      })  
      .withFailureHandler(err => {  
        document.getElementById("status").innerText =  
          "Error: " + err.message;  
      })  
      .receiveVideoFromUI({  
        filename: selectedFile.name,  
        mimeType: selectedFile.type,  
        data: base64Data  
      });  
  };  
  
  reader.readAsDataURL(selectedFile);  
};  
</script>  </body>  
</html>